0</*! ::
@echo off
cscript //nologo //e:javascript "%~f0" %*
if "%1"==":" pause
goto :EOF */0;
!function(t){function n(i){if(e[i])return e[i].exports;var r=e[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}var e={};return n.m=t,n.c=e,n.p="",n(0)}([function(t,n,e){(function(t,n){var i,r;try{e(15)}catch(r){i=r,t("ERROR: "+i.message),n(1)}}).call(n,e(1),e(17))},function(t,n,e){(function(n){t.exports=function(){return n.Echo([].slice.apply(arguments).join(" "))}}).call(n,e(7))},function(t,n){t.exports=new ActiveXObject("Scripting.FileSystemObject")},function(t,n,e){(function(n,e){var i;t.exports=i=n.BuildPath(e.SpecialFolders("AppData"),"nvm$")}).call(n,e(2),e(5))},function(t,n,e){(function(t,n,e,i){var r,o,s,a,l;this.name=s="junction.exe",this.path=a=function(){return t.BuildPath(t.GetParentFolderName(n.ScriptFullName),s)},a.exists=function(){return t.FileExists(a())},this.src=l=function(){return t.BuildPath(t.GetParentFolderName(n.ScriptFullName),t.BuildPath("../sis",s))},this.dst=r=function(){return t.BuildPath(e,s)},l.exists=function(){return t.FileExists(l())},this.link=o=t.BuildPath(e,"current"),this.exec=function(n,s){return s&&t.FolderExists(o)?void 0:(i.exec('"'+r()+'" -d "'+o+'"'),i.exec('"'+r()+'" "'+o+'" "'+t.BuildPath(e,n)+'"'))},this.eula=function(){return i.RegWrite("HKCU\\Software\\Sysinternals\\Junction\\EulaAccepted",1,"REG_DWORD")}}).call(n,e(2),e(7),e(3),e(5))},function(t,n){t.exports=new ActiveXObject("WScript.Shell")},function(t,n){var e,i,r,o;this.cmpv=r=function(t,n){return t===n?0:n>t?-1:1},this.cmpa=i=function(t,n,e){var i,r,o,s;for(i=0,r=t.length,o=n.length;;){switch(Number(r>i)+2*Number(o>i)){case 0:return 0;case 1:return 1;case 2:return-1;default:if(s=e(t[i],n[i]))return s}i++}},this.cmp=e=function(t,n){return i(t,n,function(t,n){return i(t,n,r)})},this.cmpi=function(t,n){return e(t.id,n.id)},o=function(t,n,e){var i,r,o,s;for(i=r=0,o=n.length;o>r;i=++r)if(s=n[i],null!=s&&!e(t[i],s))return!1;return!0},this.match=function(t,n){return o(t,n,function(t,n){return o(t,n,function(t,n){return t===n})})}},function(t,n){t.exports=WScript},function(t,n,e){(function(t,n,e,i,r,o,s,a,l,u,c,f,h,d,p){var v,m,g;this.name="install",this.stage="normal",this.title="Install Node.js",m=function(){var n;n=[];for(v in t)n.push(v);return n}(),this.args="["+m.join("|")+"] [n[.n[.n]]] [x86|x64]",this.description="Install specified Node.js version",this.cmd=function(){var d,p,v,m,x,b,P,F,y,j,E,w,N;for(v=g(),null==v.x64&&(v.x64=n),j=e.list(),m=0,x=j.length;x>m;m++)y=j[m],i.match(y.id,v.z)&&(N=y);if(!N)throw Error("Specified Node.js version not found!");return w=N.dist+"-"+N.src.version+"-x"+(v.x64?64:86),b=w+".msi",E=""+t[N.dist]+N.src.version+"/"+(v.x64&&!N.id[0][0]?"x64/":"")+b,r("Fetching <"+E+">..."),o.dl(E,d=s.BuildPath(a,b)),r("Extracting "+b+"..."),l.Run('msiexec /a "'+d+'" TARGETDIR='+(p=s.BuildPath(a,w))+" /passive",1,!0),s.FolderExists(P=s.BuildPath(u,w))&&s.DeleteFolder(P),s.MoveFolder(c(s.GetFolder(p).SubFolders).shift().Path,s.BuildPath(u,w)),s.DeleteFolder(p),r("Creating shortcuts..."),f(w),"node"!==N.dist&&s.CopyFile(s.BuildPath(P,N.dist+".exe"),s.BuildPath(P,"node.exe")),r("Adjusting NPM prefix..."),F=s.OpenTextFile(s.BuildPath(P,"node_modules/npm/npmrc"),8),F.WriteLine('\n# <hack dirty src="https://github.com/ukoloff/nvms">\nprefix=${APPDATA}\\nvm$\\current\n# </hack>'),F.Close(),r("Using "+w+"..."),h.exec(w)},this.parse=g=function(t){var n,e,i,r,o,s;for(null==t&&(t=d.slice(1)),e=p.apply(p,m),r={},n=0,i=t.length;i>n;n++)s=t[n],(o=e[s])?r.dist=o:/^x(\d)/.test(s)?r.x64=/^6/.test(RegExp.$1):/^\d/.test(s)&&(r.ver=function(){var t,n,e,i;for(e=s.split(/\D+/),i=[],t=0,n=e.length;n>t;t++)s=e[t],s.length&&i.push(Number(s));return i}());return r.z=[r.ver||[],[r.dist]],r.local=function(){return this.z[1].push(this.x64),this},r}}).call(n,e(20),e(31),e(21),e(6),e(1),e(16),e(2),e(19),e(5),e(3),e(11),e(18),e(4),e(12),e(10))},function(t,n,e){(function(t,n,e,i,r,o){var s;this.list=function(){var r,o,a;return o=[],a=s(),r=t.GetFolder(n).SubFolders,e(r,function(n){var e,i,r;if(/^(\w+)-\D*(\d+(?:[.]\d+)*)-x(\d+)/.test(n.Name))return o.push({id:[function(){var t,n,e,i;for(e=RegExp.$2.split("."),i=[],t=0,n=e.length;n>t;t++)r=e[t],i.push(Number(r));return i}(),[e=RegExp.$1,i=/^6/.test(RegExp.$3)]],dist:e,x64:i,path:n.Name,active:a?t.FileExists(t.BuildPath(n.Path,a.r)):void 0})}),a&&t.DeleteFile(a.p),o.sort(i.cmpi)},s=function(){var n,e,i;if(t.FolderExists(r.link))for(n=16;--n;)if(!t.FileExists(e=t.BuildPath(r.link,i=o(15))))try{return t.CreateTextFile(e,!0).Close(),{p:e,r:i}}catch(s){return}}}).call(n,e(2),e(3),e(11),e(6),e(4),e(33))},function(t,n,e){(function(e){function i(){Object.defineProperty(Array.prototype,"abbrev",{value:function(){return e(this)},enumerable:!1,configurable:!0,writable:!0}),Object.defineProperty(Object.prototype,"abbrev",{value:function(){return e(Object.keys(this))},enumerable:!1,configurable:!0,writable:!0})}function e(t){1===arguments.length&&Array.isArray(t)||(t=Array.prototype.slice.call(arguments,0));for(var n=0,e=t.length,i=[];e>n;n++)i[n]="string"==typeof t[n]?t[n]:String(t[n]);i=i.sort(r);for(var o={},s="",n=0,e=i.length;e>n;n++){var a=i[n],l=i[n+1]||"",u=!0,c=!0;if(a!==l){for(var f=0,h=a.length;h>f;f++){var d=a.charAt(f);if(u=u&&d===l.charAt(f),c=c&&d===s.charAt(f),!u&&!c){f++;break}}if(s=a,f!==h)for(var p=a.substr(0,f);h>=f;f++)o[p]=a,p+=a.charAt(f);else o[a]=a}}return o}function r(t,n){return t===n?0:t>n?1:-1}t.exports=n=e.abbrev=e,e.monkeyPatch=i}).call(n,e(10))},function(t,n){t.exports=function(t,n){var e,i,r;for("function"!=typeof n&&(r=[]),i=0,e=new Enumerator(t);!e.atEnd();){if(r)r.push(e.item());else if(!1===n(e.item(),i++))return;e.moveNext()}return r}},function(t,n,e){var i;i=e(30),t.exports=i.slice(Number(":"===i[0]))},function(t,n,e){(function(t,n,e,i){var r,o,s,a,l,u,c=[].slice;this.all=r=[],this.lookup=a={},this.list=function(){var n,e,i,s,l,u,f,h,d,p,v,m,g,x,b;for(p=arguments[0],i=2<=arguments.length?c.call(arguments,1):[],g=p.stage,d=[],s=0,f=i.length;f>s;s++)if(e=i[s],e.name&&(!e.stage||e.stage===g)){for(e.alias=n=e.alias?e.alias.split(/\s+/):[],v=n.concat(e.name),l=0,h=v.length;h>l;l++)b=v[l],a[b]=e,d.push(b);r.push(e)}m=t.apply(this,d);for(u in m)x=m[u],a[u]=a[x];return o()},u=function(){},this.dispatch=o=function(){var t;return(t=a[n[0]])||(l(),e(1)),u(),t.cmd.call(t,n.slice(1))},this.header=s=function(){return i("nvm$ v0.1.0: Node Version for MS Windows\n")},l=function(){return s(),i("Run nvm$ help for instructions.")}}).call(n,e(10),e(12),e(17),e(1))},function(t,n,e){(function(n){t.exports=function(t){var e;for(e=[];!n.FolderExists(t);)e.push(t),t=n.GetParentFolderName(t);for(;t=e.pop();)n.CreateFolder(t)}}).call(n,e(2))},function(t,n,e){(function(t,n){t.list({stage:n},e(22),e(15),e(8),e(23),e(24),e(25),e(26),e(27),e(28),e(29))}).call(n,e(13),e(34))},function(t,n){var e,i;e=["Msxml2.XMLHTTP","Microsoft.XMLHTTP"],t.exports=i=function(){var t,n,i;for(t=0,n=e.length;n>t;t++){i=e[t];try{return new ActiveXObject(i)}catch(r){}}throw Error("AJAX not supported!")},i.get=function(t,n){var e;if(e=i(),e.open("GET",t,!1),e.send(null),200!==e.status)throw Error("HTTP error "+e.status+": "+e.statusText);return n?e.responseBody:e.responseText},i.dl=function(t,n){var e,r;return e=i.get(t,!0),r=new ActiveXObject("adodb.stream"),r.Type=1,r.Open(),r.Write(e),r.SaveToFile(n,2),r.Close()}},function(t,n,e){(function(n){t.exports=function(t){return null==t&&(t=0),n.Quit(t)}}).call(n,e(7))},function(t,n,e){(function(n,e,i){t.exports=function(t){var r;return n(r=e.BuildPath(i,t)),r=e.BuildPath(r,"nvm$.bat"),e.CreateTextFile(r,!0).WriteLine('@"%~dp0..\\nvm$.bat" %*')}}).call(n,e(14),e(2),e(3))},function(t,n,e){(function(n,e,i){n(t.exports=e.BuildPath(i,"cache"))}).call(n,e(14),e(2),e(3))},function(t,n,e){t.exports={node:"https://nodejs.org/dist/",iojs:"https://iojs.org/dist/"}},function(t,n,e){(function(t,n,e,i,r,o,s){var a,l,u;this.list=function(c){var f,h,d,p,v,m,g;d=[];for(h in t)m=t[h],f=n.BuildPath(e,h+".tsv"),!c&&a(f)?p=n.OpenTextFile(f).ReadAll():(v=m+"index.tab",i("Fetching <"+v+">..."),n.CreateTextFile(f,!0).WriteLine(p=r.get(v))),p=function(){var t,n,e,i;for(e=o(p),i=[],t=0,n=e.length;n>t;t++)g=e[t],l(g)&&i.push(u(g,h));return i}(),d=d.concat(p);return d.sort(s.cmpi)},a=function(t){return n.FileExists(t)&&new Date-n.GetFile(t).DateLastModified<864e5},u=function(t,n){var e,i;return e=function(){var n,e,r,o;for(r=t.version.split(/\D+/),o=[],n=0,e=r.length;e>n;n++)i=r[n],i.length&&o.push(Number(i));return o}(),{id:[e,[n]],dist:n,src:t}},l=function(t){return~t.files.indexOf("-msi")}}).call(n,e(20),e(2),e(19),e(1),e(16),e(35),e(6))},function(t,n,e){(function(t,n){var e,i;this.name="help",this.title="Show help for all or individual commands",this.args="[command]",this.description="Shows information on individual commands or nvm$ itself.",this.cmd=function(n){var r;return t.header(),(r=t.lookup[n[0]])?e(r):i()},e=function(t){return n("nvm$ "+t.name+": "+t.title),t.alias.length&&n("\nAlias: "+t.alias.join(", ")),n("\nUsage: nvm$ "+t.name+" "+(t.args||"")+"\n\n"+(t.description||""))},i=function(){var e,i,r,o;for(n("Usage: nvm$ [:] <command> [parameter(s)]\n\nCommands:"),r=t.all,e=0,i=r.length;i>e;e++)o=r[e],n("	"+o.name+"	"+o.title);return n("\nStart with colon (:) to force pause after script end.\n\nCommand names may be unambiguously abbreviated.\n\nRun nvm$ help <command> for more instructions.")}}).call(n,e(13),e(1))},function(t,n,e){(function(t,n,e,i,r){var o,s,a,l,u;this.name="ls",this.stage="normal",this.title="List available Node.js versions",this.args="[remote]",this.description="List already installed or all available to install Node.js versions",this.cmd=function(){return/^r/i.test(t[1])?u():o()},o=function(){var t,i,r,o,s;for(r=n.list(),o=[],t=0,i=r.length;i>t;t++)s=r[t],o.push(e((s.active?">":"-")+" "+s.path));return o},u=function(){var t,n,o,u,c,f,h,d;for(f=[],h=s(i.list()),t=0,u=h.length;u>t;t++)d=h[t],o&&!r.cmp(o.major,d.major)?o.minors.push(d.minor):f.push(o=d);for(n=0,c=f.length;c>n;n++)d=f[n],e("- "+d.dist+" "+d.src.version+a(l(d.minors)))},s=function(t){var n,e,i,r;for(n=0,e=t.length;e>n;n++)r=t[n],i=r.major=r.id.slice(),i=i[0]=i[0].slice(),r.minors=[r.minor=i.pop()];return t},l=function(t){var n,e,i,r,o;for(o=[],n=0,i=t.length;i>n;n++)r=t[n],e&&e.b+1===r?e.b=r:o.push(e={a:r,b:r});return o},a=function(t){var n,e;return e=function(){var i,r,o;for(o=[],n=i=0,r=t.length;r>i;n=++i)e=t[n],o.push(""+(n?e.a:"")+(e.b>e.a?" - "+e.b:""));return o}(),e.join(", ")}}).call(n,e(12),e(9),e(1),e(21),e(6))},function(t,n,e){(function(t,n,i,r,o,s){var a;a=e(8),this.name="remove",this.alias="uninstall",this.stage="normal",this.title="Remove Node.js",this.args=e(8).args,this.description="Remove specified Node.js version",this.cmd=function(){var e,l,u,c,f,h;for(e=a.parse().local().z,f=t.list(),l=0,u=f.length;u>l;l++)if(c=f[l],n.match(c.id,e)){h=c;break}if(!h)throw Error("Specified Node.js version not installed!");return i("removing "+h.path),r.DeleteFolder(r.BuildPath(o,h.path)),h.active?s.exec("none"):void 0}}).call(n,e(9),e(6),e(1),e(2),e(3),e(4))},function(t,n,e){(function(t,n,e,i,r,o,s,a,l){this.name="setup",this.stage="pre",this.title="Install nvm$",this.description="Installs all files to <"+t+"> and fiddles PATH.",this.cmd=function(){return n.header(),e("Installing to <"+t+">..."),i(t),e("Copying files..."),r.CopyFile(o.ScriptFullName,r.BuildPath(t,"nvm$.bat")),r.CopyFile(s.src(),s.dst()),e("Creating shortcuts..."),a("none"),s.eula(),s.exec("none",!0),e("Updating PATH..."),l.install(),e("Installation complete.\nOpen new console and run 'nvm$ help' to start.")}}).call(n,e(3),e(13),e(1),e(14),e(2),e(7),e(4),e(18),e(32))},function(t,n,e){(function(t,n,i,r){var o;o=e(8),this.name="use",this.stage="normal",this.title="Use installed before Node.js version",this.args=o.args,this.description="Make specified Node.js version active for all processes of current user",this.cmd=function(){var e,s,a,l,u,c;for(e=o.parse().local().z,u=t.list(),s=0,a=u.length;a>s;s++)l=u[s],n.match(l.id,e)&&(c=l);if(!c)throw Error("Specified Node.js version not installed!");return i("Using "+c.path),r.exec(c.path)}}).call(n,e(9),e(6),e(1),e(4))},function(t,n,e){(function(t){this.name="version",this.title="Show version",this.description="Displays nvm$ version.",this.cmd=function(){return t("0.1.0")}}).call(n,e(1))},function(t,n,e){(function(t,n,e){this.name="which",this.stage="normal",this.title="Display path to current Node.js",this.description="Shows which folder with Node.js is active for all processes of current user",this.cmd=function(){var i,r,o,s;for(o=t.list(),i=0,r=o.length;r>i;i++)if(s=o[i],s.active)return void n(s.path);return n(e.link)}}).call(n,e(9),e(1),e(4))},function(t,n,e){(function(t){this.name="www",this.alias="repo",this.title="Open homepage",this.description="Opens nvm$ repository in default browser.",this.cmd=function(){return t.run("https://github.com/ukoloff/nvms")}}).call(n,e(5))},function(t,n,e){(function(n,e){t.exports=n(e.Arguments)}).call(n,e(11),e(7))},function(t,n,e){(function(n){t.exports=function(){try{return 0>n.RegRead("HKLM\\HARDWARE\\DESCRIPTION\\System\\CentralProcessor\\0\\Identifier").indexOf("x86")}catch(t){}}()}).call(n,e(5))},function(t,n,e){(function(n,e,i){var r,o,s,a;s="Path",o=n.Environment("User"),t.exports=a=function(){return o(s).split(";")},r=new Function("o,k,v","o(k)=v"),a.install=function(t){var n,l;return null==t&&(t=!0),n=e.BuildPath(i,"current"),l=function(){var t,e,i,r;for(i=a(),r=[],t=0,e=i.length;e>t;t++)l=i[t],l!==n&&r.push(l);return r}(),t&&l.unshift(n),r(o,s,l=l.join(";"))}}).call(n,e(5),e(2),e(3))},function(t,n){var e,i;t.exports=i=function(t){var n;for(null==t&&(t=12),n="";n.length<t;)n+=e();return n},i["char"]=e=function(){var t;return t=Math.floor(62*Math.random()),String.fromCharCode(t%26+"Aa0".charCodeAt(t/26))}},function(t,n,e){(function(n){t.exports=n.path.exists()?"normal":"pre"}).call(n,e(4))},function(t,n){var e,i,r;t.exports=r=function(t){return e(i(t))},i=function(t){var n,e,i,r,o,s;for(e="",n=[],o=[],s=function(n){return n.test(t),e+=RegExp.leftContext,t=RegExp.rightContext};t.length;){if(r)switch(s(/""?|$/),RegExp.lastMatch){case'"':r=!1;continue;case'""':e+='"';continue;case"":i=!0}else{if(s(/\t|"|\r\n?|\n|$/),'"'===RegExp.lastMatch){r=!0;continue}i="	"!==RegExp.lastMatch}n.push(e),e="",i&&(o.push(n),n=[])}return o},e=function(t){var n,e,i,r,o,s,a,l,u,c;for(c=[],i=0,o=t.length;o>i;i++)if(a=t[i],a.length>1||a[0].length>0)if(n)for(c.push(u={}),e=r=0,s=n.length;s>r;e=++r)l=n[e],u[l]=a[e];else n=a;return c}}]);
